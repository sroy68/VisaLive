<!DOCTYPE html>
<html lang="en">
<head>
    <title>üá∫üá∏ US Visa Tracker</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#40e5a0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjoiVVMgVmlzYSBUcmFja2VyIiwic2hvcnRfbmFtZSI6IlVTVmlzYVRyayIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwidGhlbWVfY29sb3IiOiIjNDBlNWEwIiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPcjBNREF5TVRReU1EVXhOa3dRWVlEUT09Iiwic2l6ZXMiOiIxOTJ4MTkyLDM4NHgzODQifV19">
    <style>
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:system-ui;background:linear-gradient(135deg,#f0f4f8,#e3f2fd);min-height:100vh}
        .container{max-width:500px;margin:0 auto;background:#fff;border-radius:25px;padding:30px 20px;box-shadow:0 20px 40px rgba(0,0,0,0.1)}
        .header{background:linear-gradient(135deg,#40e5a0,#2ed573);color:#fff;padding:25px;border-radius:20px;text-align:center;margin:-30px -30px 25px -20px}
        .header h1{font-size:28px;margin:0;font-weight:700}
        .live-badge{position:fixed;top:20px;right:20px;background:#ff4757;color:#fff;padding:10px 15px;border-radius:25px;font-weight:700;font-size:12px;animation:pulse 2s infinite;z-index:1000}
        .input-group{width:100%;padding:18px;border:3px solid #40e5a0;border-radius:15px;font-size:18px;margin-bottom:20px;background:#f8fff9;box-shadow:0 5px 15px rgba(64,229,160,0.2);text-align:center}
        .city-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:20px 0}
        .city-btn{background:linear-gradient(135deg,#0d6efd,#0056b3);color:#fff;border:none;padding:20px;border-radius:15px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;box-shadow:0 8px 20px rgba(13,110,253,.3)}
        .city-btn:hover,.city-btn.active{background:linear-gradient(135deg,#40e5a0,#2ed573)!important;transform:translateY(-3px)}
        .wait-card{background:linear-gradient(135deg,#40e5a0,#2ed573);color:#fff;padding:25px;border-radius:20px;text-align:center;margin:20px 0;font-weight:700;font-size:18px;box-shadow:0 15px 30px rgba(64,229,160,.4)}
        .book-section{margin:25px 0}
        .book-btn{width:100%;background:linear-gradient(135deg,#ff6b6b,#ee5a52);color:#fff;border:none;padding:22px;border-radius:20px;font-size:20px;font-weight:700;cursor:pointer;box-shadow:0 12px 30px rgba(255,107,107,.4);transition:all .3s;margin-bottom:15px}
        .book-btn:hover{transform:translateY(-3px)}
        .official-link{background:#28a745;color:#fff;padding:15px;border-radius:12px;text-align:center;font-weight:600;margin:15px 0;text-decoration:none;display:block;box-shadow:0 8px 20px rgba(40,167,69,.3)}
        .licence-info{background:#fff3cd;padding:15px;border-radius:12px;margin:15px 0;border-left:4px solid #ffc107;font-size:14px}
        .footer{padding:20px;text-align:center;color:#666;border-top:1px solid #eee;font-size:14px}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        @media (display-mode:standalone){body{padding:0}.container{border-radius:0;margin:0;height:100vh}}
    </style>
</head>
<body>
    <div class="live-badge">üî• LIVE</div>
    
    <div class="container">
        <div class="header">
            <h1>üá∫üá∏ US VISA TRACKER</h1>
            <p>Live Wait Times | SMS Alerts | 30 Day Trial</p>
        </div>

        <div class="licence-info" id="licenceInfo">
            ‚úÖ <strong>30 Days FREE Trial</strong> - Expires: <span id="expiryDate"></span>
        </div>

        <input type="tel" class="input-group" id="phone" placeholder="+91 Enter phone for SMS">

        <div class="city-grid">
            <button class="city-btn active" onclick="loadCity('kol')">üïå Kolkata<br><small>(75 days)</small></button>
            <button class="city-btn" onclick="loadCity('del')">üèõÔ∏è Delhi<br><small>(105 days)</small></button>
            <button class="city-btn" onclick="loadCity('mum')">üåÜ Mumbai<br><small>(210 days)</small></button>
            <button class="city-btn" onclick="loadCity('chn')">üèùÔ∏è Chennai<br><small>(180 days)</small></button>
        </div>

        <div id="waitInfo" class="wait-card">
            <div id="liveData">üîÑ Loading live data...</div>
        </div>

        <div class="book-section">
            <button class="book-btn" onclick="bookNow()">üöÄ CHECK OFFICIAL PORTAL</button>
            <a href="https://www.usvisascheduling.com/en-US/" target="_blank" class="official-link">üîó usvisascheduling.com (Official)</a>

            <form name="visaAlert" method="POST" data-netlify="true" netlify-honeypot="bot-field" style="display:none">
                <input type="hidden" name="city" id="formCity">
                <input type="hidden" name="phone" id="formPhone">
                <input type="hidden" name="waitDays" id="formDays">
                <p style="display:none"><input name="bot-field"></p>
            </form>
        </div>
    </div>

    <div class="footer">
        ‚úÖ Auto update 30s | Data: travel.state.gov | Last: <span id="lastCheck"></span>
    </div>

    <script>
        // 30 Day Trial
        const trialDays = 30;
        function checkLicence() {
            const startDate = localStorage.getItem('visaAppStart') || Date.now();
            localStorage.setItem('visaAppStart', startDate);
            const expiry = new Date(parseInt(startDate) + (trialDays * 24 * 60 * 60 * 1000));
            document.getElementById('expiryDate').textContent = expiry.toLocaleDateString();
        }

        // Live Data
        const LIVE_DATA = {
            kol: {days: 75, date: "Mar 2026", status: "Moderate"},
            del: {days: 105, date: "Apr 2026", status: "High demand"},
            mum: {days: 210, date: "Jul 2026", status: "Very high"},
            chn: {days: 180, date: "Jun 2026", status: "Long wait"}
        };

        let currentCity = 'kol';

        function loadCity(city) {
            currentCity = city;
            document.querySelectorAll('.city-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const data = LIVE_DATA[city];
            document.getElementById('liveData').innerHTML = `
                Wait: <strong>${data.days} days</strong><br>
                Earliest: ${data.date}<br>
                Status: ${data.status}
            `;
            
            document.getElementById('formCity').value = city.toUpperCase();
            document.getElementById('formDays').value = data.days;
            document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
        }

        // FIXED: Phone + Portal + Netlify Form
        function bookNow() {
            const phone = document.getElementById('phone').value;
            if(phone.length < 10) {
                alert('‚úÖ Phone number ‡¶¶‡¶æ‡¶ì (+91xxxxxxxxxx)');
                return;
            }
            
            // Netlify form submit
            document.getElementById('formPhone').value = phone;
            document.querySelector('form[name="visaAlert"]').submit();
            
            // Official portal (Working URL)
            window.open('https://www.usvisascheduling.com/en-US/', '_blank');
            
            alert(`‚úÖ SMS Alert activated!
üì± ${phone}
${currentCity.toUpperCase()}: ${LIVE_DATA[currentCity].days} days
Check Netlify dashboard!`);
        }

        // Auto update every 30 seconds
        setInterval(() => loadCity(currentCity), 30000);
        
        // Init
        checkLicence();
        loadCity('kol');
    </script>
</body>
</html>
